<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZJQ6RGoFJHdFW8gQc96N99L0tOHHJXk4&callback=initMap&libraries=&v=weekly" defer></script>
<div id="map" style="width:100%;height: 100%;"></div>

        <script>
            // Initialize and add the map
            function initMap() {        
                let locations = []

                {% for event in event_list %}
                    locations.push({ lat: {{event.lat}}, lng: {{event.lng}}})
                {% endfor %}

                console.log(locations)

                map_center = {lat:0,lng:0}

                locations.map(o=> {
                    map_center.lat += o.lat;
                    map_center.lng += o.lng;
                })

                map_center.lat /= locations.length;
                map_center.lng /= locations.length;
        
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 15,
                    center: map_center,
                });
        
                locations.map(o=>{
                    let marker = new google.maps.Marker({
                        position: o,
                        map: map,
                    });
                })
            }
        </script>